<div class="d-sm-flex align-items-center justify-content-between mb-4">
	<h1 class="h3 mb-0 text-gray-800">Update my reader profiles</h1>
</div>
<div class="row justify-content-center" >
	<div class="col-xl-10 col-lg-10 col-md-10 col-sm-12">

		<div class="row">
			<div class="col-xl-10 col-lg-9 col-md-8 col-sm-6">
				<div *ngIf="globalError" class="alert alert-danger">{{globalError}}</div>
				<div *ngIf="globalInfo" class="alert alert-success">{{globalInfo}}</div>	
			</div>
			<div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 right">
				<a class="btn btn-primary btn-icon-split" (click)="newUserConfig()" data-toggle="modal" data-target="#addUpdateConfig">
					<span class="icon text-white-50">
						<i class="fas fa-plus"></i>
					</span>
					<span class="text"> Add profile</span>
				</a>
			</div>
		</div>
		<br/>
	
		<div class="card shadow mb-4" *ngFor="let config of userConfigService.userConfigs; let i = index">
			<a href="#collapseCardExample{{config.id}}" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true">
				<h6 class="m-0 font-weight-bold text-primary">{{config.name}}</h6>
            </a>
			<div class="collapse" id="collapseCardExample{{config.id}}">
				<div class="card-body row">
				
					<div class="col d-flex justify-content-between justify-content-between">
						<a class="btn btn-warning btn-icon-split" (click)="setCurrentUserConfig(i)" data-toggle="modal" data-target="#addUpdateConfig">
							<span class="icon text-white-50">
								<i class="fas fa-edit"></i>
							</span>
							<span class="text-white"> Modify profile</span>
						</a>
						<a class="btn btn-danger btn-icon-split" (click)="setCurrentUserConfig(i)" data-toggle="modal" data-target="#deleteConfModal">
							<span class="icon text-white-50">
							  <i class="fas fa-trash"></i>
							</span>
							<span class="text text-white"> Delete</span>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="addUpdateConfig" tabindex="-1" role="dialog" aria-labelledby="Reader profile modal" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" *ngIf="userConfig!=null">
			<div class="modal-header">
				<h5 class="modal-title">{{userConfig.name}}</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
            </div>
            <form #userConfigForm="ngForm">
				<div class="modal-body">
              
					<div class="form-group">
						<input type="text" [(ngModel)]="userConfig.name" 
							class="form-control"
							id="inputConfigName"
							aria-describedby="Name is required"
							name="inputConfigName"
							placeholder="Enter config name..."
							required min-length=2 #configName="ngModel">
							<span class="floating-label">Config name</span>
						<div *ngIf="configName.dirty && configName.invalid" class="alert alert-danger">Name is required</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					 <button type="button" class="btn btn-primary btn-icon-split" (click)="saveConfig()" data-dismiss="modal" [disabled]="!userConfigForm.form.valid">
						<span class="icon text-white-50">
							 <i class="fas fa-plus"></i>
						</span>
						<span class="text"> Save</span>
					</button>
				</div>
			</form>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteConfModal" tabindex="-1" role="dialog" aria-labelledby="Delete confirmation" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Delete profile</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
            </div>
            <div class="modal-body" *ngIf="userConfig!=null">
                Are you sure you want to delete profile :<br>
				<b>{{userConfig.name}}</b>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger btn-icon-split" (click)="deleteConf()" data-dismiss="modal">
					<span class="icon text-white-50">
						 <i class="fas fa-trash"></i>
					</span>
					<span class="text"> Delete</span>
				</button>
            </div>
        </div>
    </div>
</div>